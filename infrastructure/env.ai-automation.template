# AI Automation Service Configuration Template
# Copy this file to: infrastructure/env.ai-automation
# Fill in your actual values (remove angle brackets)

# ============================================================================
# HOME ASSISTANT MQTT BROKER (Already Running)
# ============================================================================
# Your Home Assistant server already has MQTT running on port 1883
# Get credentials from: HA UI → Settings → Devices & Services → MQTT

MQTT_BROKER=<YOUR_HA_SERVER_IP>        # e.g., 192.168.1.100 or homeassistant.local
MQTT_PORT=1883                          # Standard MQTT port
MQTT_USERNAME=<YOUR_MQTT_USERNAME>      # From HA MQTT integration
MQTT_PASSWORD=<YOUR_MQTT_PASSWORD>      # From HA MQTT integration

# ============================================================================
# HOME ASSISTANT API
# ============================================================================
# Create long-lived access token in HA:
# Profile → Long-Lived Access Tokens → Create Token

HA_URL=http://<YOUR_HA_SERVER_IP>:8123
HA_TOKEN=<YOUR_HA_LONG_LIVED_ACCESS_TOKEN>

# ============================================================================
# DATA API (From Existing HA Ingestor Project)
# ============================================================================
DATA_API_URL=http://data-api:8006

# ============================================================================
# OPENAI API
# ============================================================================
# IMPORTANT: Add OPENAI_API_KEY to your .env file (NOT this template file)
# 
# Get API key from: https://platform.openai.com/api-keys
# Recommended: Set spending limit to $10/month in OpenAI dashboard
#
# Add to .env file:
# OPENAI_API_KEY=sk-your-actual-key-here
#
# The service loads it from .env via docker-compose.yml environment mapping
# This ensures the key persists and doesn't get lost when files are updated

# ============================================================================
# AUTHENTICATION (API key protection for every endpoint)
# ============================================================================
ENABLE_AUTHENTICATION=true
AI_AUTOMATION_API_KEY=<GENERATE_A_RANDOM_USER_KEY>
AI_AUTOMATION_ADMIN_API_KEY=<GENERATE_A_STRONGER_ADMIN_KEY>

# ============================================================================
# SCHEDULING
# ============================================================================
# Cron format: minute hour day month dayofweek
# Default: 3:00 AM daily

ANALYSIS_SCHEDULE=0 3 * * *

# ============================================================================
# DATABASE
# ============================================================================
DATABASE_PATH=/app/data/ai_automation.db

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=INFO                          # DEBUG, INFO, WARNING, ERROR

# ============================================================================
# AI CORE SERVICE SECURITY
# ============================================================================
AI_CORE_API_KEY=<SET_A_STRONG_KEY>
AI_CORE_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
AI_CORE_RATE_LIMIT=60
AI_CORE_RATE_LIMIT_WINDOW=60
# OPTIONAL: TRAINING SCRIPT HARDENING
# ============================================================================
# TRAINING_SCRIPT_PATH=scripts/train_soft_prompt.py
# TRAINING_SCRIPT_SHA256=<OPTIONAL_EXPECTED_HASH>

