id: 'wled_office_random_burst_15min'
alias: WLED Office - random effect every 15 minutes
description: "Every 15 minutes, play a random WLED effect at 100% brightness for 15 seconds, then restore the previous Office state."
mode: single
trigger:
  - platform: time_pattern
    minutes: '/15'
conditions: []
action:
  - service: scene.create
    data:
      scene_id: office_wled_before_random_burst
      snapshot_entities:
        - light.wled
  - service: light.turn_on
    target:
      entity_id: light.wled
    data:
      brightness: 255
      rgb_color:
        - "{{ range(0,255) | random }}"
        - "{{ range(0,255) | random }}"
        - "{{ range(0,255) | random }}"
      effect: "{{ state_attr('light.wled','effect_list') | default([], true) | random if state_attr('light.wled','effect_list') is defined else 'Solid' }}"
  - delay: '00:00:15'
  - service: scene.turn_on
    target:
      entity_id: scene.office_wled_before_random_burst