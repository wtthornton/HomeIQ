id: 'office_wled_random_burst_15min'
alias: Office WLED Random Burst Every 15 Minutes
description: "Every 15 minutes, run a 15-second random full-brightness WLED burst on Office, then restore previous state"
mode: single
trigger:
  - platform: time_pattern
    minutes: '/15'
conditions: []
action:
  - condition: template
    value_template: "{{ not is_state('light.wled', 'unavailable') }}"
  - service: scene.create
    data:
      scene_id: office_wled_before_burst
      snapshot_entities:
        - light.wled
  - service: light.turn_on
    target:
      entity_id: light.wled
    data:
      brightness_pct: 100
      effect: "Random"
      rgb_color: >
        {% set colors = [
          [255, 0, 0],
          [0, 255, 0],
          [0, 0, 255],
          [255, 255, 0],
          [255, 0, 255],
          [0, 255, 255],
          [255, 127, 0],
          [127, 0, 255],
          [0, 255, 127],
          [255, 255, 255]
        ] %}
        {{ colors | random }}
  - delay: '00:00:15'
  - service: scene.turn_on
    target:
      entity_id: scene.office_wled_before_burst