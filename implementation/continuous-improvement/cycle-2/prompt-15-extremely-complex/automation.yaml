id: 'office_wled_sync_with_living_room_by_time_of_day'
alias: Office WLED â€“ Sync with Living Room by Time of Day
description: "When any living room light changes state, adjust the Office WLED brightness based on time of day and the living room brightness."
mode: restart
trigger:
  - platform: state
    entity_id: light.living_room_2
conditions: []
action:
  - delay: "00:00:02"
  - variables:
      office_brightness: "{{ state_attr('light.wled', 'brightness') | int(0) }}"
      living_brightness: "{{ state_attr('light.living_room_2', 'brightness') | int(0) }}"
  - choose:
      - conditions:
          - condition: time
            after: "06:00:00"
            before: "18:00:00"
          - condition: template
            value_template: "{{ office_brightness < 128 }}"
          - condition: template
            value_template: "{{ not (office_brightness >= 174 and office_brightness <= 184) }}"
        sequence:
          - service: light.turn_on
            target:
              entity_id: light.wled
            data:
              brightness: 179
      - conditions:
          - condition: or
            conditions:
              - condition: time
                after: "18:00:00"
              - condition: time
                before: "06:00:00"
          - condition: template
            value_template: "{{ living_brightness > 153 }}"
          - condition: template
            value_template: "{{ not (office_brightness >= 72 and office_brightness <= 82) }}"
        sequence:
          - service: light.turn_on
            target:
              entity_id: light.wled
            data:
              brightness: 77
  - delay: "00:00:02"