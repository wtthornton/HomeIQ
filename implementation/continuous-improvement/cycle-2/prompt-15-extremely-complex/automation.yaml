id: 'living_room_wled_sync_by_time'
alias: Living Room to Office WLED Time-Based Sync
description: "Keep Office WLED brightness synced to Living Room behavior based on time of day with 2-second debounce"
mode: restart
trigger:
  - platform: state
    entity_id: light.living_room_2
action:
  - delay: '00:00:02'
  - variables:
      now_hour: "{{ now().hour }}"
      living_brightness: "{{ state_attr('light.living_room_2', 'brightness') | int(0) }}"
      office_brightness: "{{ state_attr('light.wled', 'brightness') | int(0) }}"
  - choose:
      - conditions:
          - condition: template
            value_template: "{{ now_hour >= 6 and now_hour < 18 }}"
          - condition: template
            value_template: "{{ office_brightness < 128 }}"
        sequence:
          - delay: '00:00:02'
          - condition: template
            value_template: "{{ state_attr('light.wled', 'brightness') | int(0) < 128 }}"
          - service: light.turn_on
            target:
              entity_id: light.wled
            data:
              brightness: 179
      - conditions:
          - condition: template
            value_template: "{{ now_hour >= 18 or now_hour < 6 }}"
          - condition: template
            value_template: "{{ living_brightness > 154 }}"
          - condition: template
            value_template: "{{ office_brightness > 77 }}"
        sequence:
          - delay: '00:00:02'
          - condition: template
            value_template: "{{ state_attr('light.living_room_2', 'brightness') | int(0) > 154 }}"
          - condition: template
            value_template: "{{ state_attr('light.wled', 'brightness') | int(0) > 77 }}"
          - service: light.turn_on
            target:
              entity_id: light.wled
            data:
              brightness: 77