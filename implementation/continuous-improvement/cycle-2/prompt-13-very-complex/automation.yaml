id: 'office_wled_temp_living_room_lighting'
alias: Office WLED → Temporary Living Room Lighting
description: "When Office WLED turns on, brighten Living Room to 80%, then restore WLED and turn Living Room off after 10 minutes."
mode: restart
trigger:
  - platform: state
    entity_id: light.wled
    to: 'on'
conditions: []
action:
  # Step 1 – Snapshot Office WLED state before changes
  - service: scene.create
    data:
      scene_id: office_wled_before_temp_living_room
      snapshot_entities:
        - light.wled

  # Step 2 – Turn on Living Room light to ~80% brightness if supported
  - choose:
      - conditions:
          - condition: template
            value_template: "{{ state_attr('light.living_room_2','supported_features')|int(default=0) % 2 == 0 }}"
        sequence:
          - service: light.turn_on
            target:
              entity_id: light.living_room_2
            data:
              brightness_pct: 80
    default:
      - service: light.turn_on
        target:
          entity_id: light.living_room_2

  # Step 3 – Wait 10 minutes
  - delay: '00:10:00'

  # Step 4 – Restore Office WLED to saved state
  - service: scene.turn_on
    target:
      entity_id: scene.office_wled_before_temp_living_room

  # Step 5 – Turn off Living Room light
  - service: light.turn_off
    target:
      entity_id: light.living_room_2