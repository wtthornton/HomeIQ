id: 'office_wled_random_effect_15min'
alias: Office WLED Random Effect Every 15 Minutes
description: "Every 15 minutes set a random effect, random color, 100% brightness on Office WLED for 15 seconds, then restore previous state."
mode: single
trigger:
  - platform: time_pattern
    minutes: '/15'
conditions:
  - condition: not
    conditions:
      - condition: state
        entity_id: light.wled
        state: 'unavailable'
action:
  - service: scene.create
    data:
      scene_id: office_wled_before_random_effect
      snapshot_entities:
        - light.wled
  - service: light.turn_on
    target:
      entity_id: light.wled
    data:
      brightness_pct: 100
      effect: "random"
      rgb_color:
        - "{{ range(0, 256) | random }}"
        - "{{ range(0, 256) | random }}"
        - "{{ range(0, 256) | random }}"
  - delay: '00:00:15'
  - service: scene.turn_on
    target:
      entity_id: scene.office_wled_before_random_effect