{
  "prompt_id": "prompt-12-very-complex",
  "prompt_name": "State Restoration with Conditions",
  "prompt_text": "Every 15 mins choose a random effect on the Office WLED device. Play the effect for 15 secs. Choose random effect, random colors and brightness to 100%. At the end of the 15 sec the WLED light needs to return to exactly what it was before it started.",
  "complexity": "Very Complex",
  "query_id": "query-67f7b4b1",
  "suggestion_id": "ask-ai-27788dff",
  "automation_id": "automation.office_wled_random_effect_15min_1763945189_e8289b3a",
  "automation_yaml": "id: 'office_wled_random_effect_15min'\nalias: Office WLED \u2013 Random effect every 15 minutes (with state restore)\ndescription: \"Every 15 minutes play a 15s random WLED effect on Office, then restore original Office state.\"\nmode: single\ntrigger:\n  - platform: time_pattern\n    minutes: \"/15\"\nconditions: []\naction:\n  - service: scene.create\n    data:\n      scene_id: office_wled_before_random_effect\n      snapshot_entities:\n        - light.wled\n  - variables:\n      rand_r: \"{{ range(0, 256) | random }}\"\n      rand_g: \"{{ range(0, 256) | random }}\"\n      rand_b: \"{{ range(0, 256) | random }}\"\n      rand_effect: >-\n        {{ [\n          'Solid', 'Blink', 'Breathe', 'Android', 'Aurora', 'Bee', 'Blends',\n          'Blink Rainbow', 'Bouncing Balls', 'Bpm', 'Candle', 'Candle Multi',\n          'Chase', 'Chase 2', 'Chase 3', 'Chase Rainbow', 'Chunchun',\n          'Colorloop', 'Colorful', 'Colorwaves', 'Dancing Shadows', 'DNA',\n          'Dissolve', 'Dissolve Rnd', 'Drip', 'Drip Rainbow', 'Dynamic',\n          'Fairy', 'Fill Noise', 'Fire 2012', 'Fire Flicker', 'Fireworks 1D',\n          'Fireworks Starburst', 'Flow', 'Funky Plank', 'Glitter', 'Gradient',\n          'Gravcenter', 'Gravcentric', 'Heartbeat', 'ICU', 'Juggle', 'Lake',\n          'Lighthouse', 'Lightning', 'Matrix', 'Meteor', 'Meteor Smooth',\n          'Noise 1', 'Noise 2', 'Noise 3', 'Noise 4', 'Oscillate', 'Pianola',\n          'Pride 2015', 'Rain', 'Railway', 'Rainbow', 'Rainbow Runner',\n          'Ripple', 'Running', 'Running 2', 'Scanner', 'Scanner Dual',\n          'Scan', 'Sinelon', 'Sinelon Dual', 'Sinelon Rainbow', 'Slope',\n          'Sparkle', 'Sparkle Dark', 'Spots', 'Spots Fade', 'Stream',\n          'Strobe', 'Strobe Mega', 'Strobe Rainbow', 'Sunrise',\n          'Sweep', 'Sweep Random', 'Theater', 'Theater Rainbow', 'Traffic Light',\n          'Tri Chase', 'Tri Fade', 'Tri Wipe', 'Twinkle', 'Twinklecat',\n          'Twinklefox', 'Waterfall', 'Wipe', 'Wipe Random'\n        ] | random }}\n  - service: light.turn_on\n    target:\n      entity_id: light.wled\n    data:\n      effect: \"{{ rand_effect }}\"\n      brightness: 255\n      rgb_color:\n        - \"{{ rand_r }}\"\n        - \"{{ rand_g }}\"\n        - \"{{ rand_b }}\"\n  - delay: \"00:00:15\"\n  - service: scene.turn_on\n    target:\n      entity_id: scene.office_wled_before_random_effect",
  "clarification_rounds": 1,
  "clarification_log": [
    {
      "round": 1,
      "questions": [
        {
          "id": "q1",
          "category": "device",
          "question_text": "Which device did you mean? Device 'light' matches devices in wrong location. You mentioned: office, end of",
          "question_type": "text",
          "options": null,
          "priority": 1,
          "related_entities": [
            "c0070ae3ca3271e5c18c37fc1beaf0e8"
          ],
          "cached_answer": null,
          "cached_entities": null,
          "cached_similarity": null
        },
        {
          "id": "q2",
          "category": "action",
          "question_text": "Could you clarify: Action 'turn' is vague - missing details: dim, brighten",
          "question_type": "text",
          "options": null,
          "priority": 2,
          "related_entities": null,
          "cached_answer": null,
          "cached_entities": null,
          "cached_similarity": null
        }
      ],
      "answers": [
        {
          "question_id": "q1",
          "answer_text": "Office Wled",
          "selected_entities": null
        },
        {
          "question_id": "q2",
          "answer_text": "Yes",
          "selected_entities": null
        }
      ],
      "timestamp": "2025-11-23T16:45:51.835445"
    }
  ],
  "automation_score": 65.0,
  "yaml_score": 100.0,
  "total_score": 81.5,
  "error": null,
  "success": true,
  "timestamp": "2025-11-23T16:45:50.405580"
}