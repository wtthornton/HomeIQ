# HomeIQ Shared Base Requirements
# Common dependencies used across multiple services
# Last Updated: January 2025
#
# Usage in service requirements.txt:
#   -r ../requirements-base.txt
#   # Service-specific dependencies below
#
# Version Management Strategy:
#   - Use version ranges (>=x.y.z,<x+1.0.0) for patch updates
#   - Pin major.minor versions for stability
#   - Document breaking changes when upgrading major versions
#
# Python Version: 3.12 (minimum required)

# ============================================
# Web Framework (Most Services)
# ============================================
fastapi>=0.123.0,<0.124.0  # Stable 0.123.x series (December 2025)
uvicorn[standard]>=0.32.0,<0.33.0  # Stable 0.32.x series with standard extras
python-multipart>=0.0.20,<0.1.0  # FastAPI file uploads support

# ============================================
# Data Validation (Most Services)
# ============================================
pydantic>=2.12.4,<3.0.0  # Stable Pydantic v2 - unpinned for patch updates
pydantic-settings>=2.12.0,<3.0.0  # Pydantic settings management

# ============================================
# HTTP Clients (Most Services)
# ============================================
httpx>=0.28.1,<0.29.0  # Latest stable (2025 - Epic 41) - async HTTP client
aiohttp>=3.13.2,<4.0.0  # Latest stable (2025) - async HTTP client/server
tenacity>=8.0.0,<9.0.0  # Retry logic for API calls

# ============================================
# Configuration (Most Services)
# ============================================
python-dotenv>=1.2.1,<2.0.0  # Environment variable loading

# ============================================
# System Monitoring (Most Services)
# ============================================
psutil>=7.1.3,<8.0.0  # System and process utilities

# ============================================
# Database (Services with Database)
# ============================================
sqlalchemy>=2.0.44,<3.0.0  # SQL toolkit and ORM - unpinned for patch updates
aiosqlite>=0.21.0,<0.22.0  # Async SQLite driver - unpinned for patch updates
alembic>=1.17.2,<2.0.0  # Database migration tool - unpinned for patch updates

# ============================================
# InfluxDB Client (Data Services)
# ============================================
influxdb-client>=1.49.0,<2.0.0  # Latest stable (2025) - unpinned for patch updates

# ============================================
# WebSocket Support (WebSocket Services)
# ============================================
websockets>=12.0,<13.0.0  # WebSocket client/server - unpinned for patch updates

# ============================================
# MQTT Support (IoT Services)
# ============================================
paho-mqtt>=1.6.1,<2.0.0  # MQTT client - unpinned for patch updates

# ============================================
# Testing (All Services - Dev Dependencies)
# ============================================
pytest>=8.3.3,<9.0.0  # Testing framework - unpinned for patch updates
pytest-asyncio>=0.23.0,<1.0.0  # Async pytest support - unpinned for patch updates
pytest-cov>=5.0.0,<6.0.0  # Coverage plugin - unpinned for patch updates

# ============================================
# Code Quality (Development Only)
# ============================================
# Note: These are optional and should be installed separately for development
# black>=23.11.0,<24.0.0  # Code formatter
# isort>=5.12.0,<6.0.0  # Import sorter
# flake8>=6.1.0,<7.0.0  # Linter
# mypy>=1.7.1,<2.0.0  # Type checker

# ============================================
# Notes
# ============================================
# 1. Services should extend this base file: -r ../requirements-base.txt
# 2. Service-specific dependencies should be added in service requirements.txt
# 3. Version ranges allow automatic patch updates while maintaining compatibility
# 4. Major version upgrades should be tested and documented per service
# 5. Some services may need to pin specific versions due to compatibility issues

