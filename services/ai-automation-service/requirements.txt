# AI Automation Service Dependencies
# Updated November 2025 - All versions verified stable for 2025

# Web Framework
fastapi>=0.115.0,<0.116.0  # Stable 0.115.x series (November 2025)
uvicorn[standard]>=0.32.0,<0.33.0  # Stable 0.32.x series with standard extras
python-multipart>=0.0.12,<0.1.0  # Stable for FastAPI file uploads

# Data Validation
pydantic>=2.9.0,<3.0.0  # Stable Pydantic v2 (November 2025)
pydantic-settings>=2.5.0,<3.0.0  # Compatible with Pydantic v2

# Database
sqlalchemy>=2.0.35,<3.0.0  # Stable SQLAlchemy 2.0.x (November 2025)
aiosqlite>=0.20.0,<0.21.0  # Stable async SQLite driver
alembic>=1.13.0,<2.0.0  # Stable database migration tool

# MQTT
paho-mqtt>=1.6.1,<2.0.0  # Stable MQTT client

# HTTP Client
httpx>=0.28.1,<0.29.0  # Latest stable (2025 - Epic 41)
aiohttp>=3.13.2,<4.0.0  # Latest stable (2025 - Epic 41)

# InfluxDB Client
influxdb-client>=1.40.0,<2.0.0  # Stable InfluxDB client

# Data Processing
pandas>=2.2.0,<3.0.0  # Stable pandas 2.x (November 2025)
numpy>=1.26.0,<1.27.0  # Stable NumPy 1.26.x (compatible with pandas and openvino, excludes 2.x to avoid OpenVINO conflict)

# Machine Learning
scikit-learn>=1.5.0,<2.0.0  # Stable scikit-learn 1.5.x (November 2025)
scipy>=1.16.3,<2.0.0  # Latest stable (2025) - statistical operations
tabpfn>=2.2.0,<7.0.0  # TabPFN for correlation prediction (Epic 36 - 100-1000x faster, 2025 update)
river>=0.22.0,<1.0.0  # River for streaming statistics (Epic 36 - O(1) real-time updates)
faiss-cpu>=1.7.4,<2.0.0  # FAISS for vector similarity search (Epic 37 - 2025: CPU-only, flat index for single-home)
optuna>=3.6.0,<4.0.0  # Optuna for hyperparameter optimization (Epic 37 - AutoML foundation)

# LLM Integration - Multi-Model Entity Extraction
openai>=1.54.0,<2.0.0  # Stable OpenAI Python SDK (November 2025 - supports GPT-5.1)
spacy>=3.7.0,<4.0.0  # Stable spaCy NLP library
tiktoken>=0.8.0,<1.0.0  # Stable token counting for OpenAI models (November 2025)

# Phase 1 Optimized Model Stack (OpenVINO INT8)
# Version constraints to avoid conflicts:
# optimum-intel 1.21.0+ requires transformers>=4.40.0
# Use CPU-only torch wheel to avoid NVIDIA dependencies
--extra-index-url https://download.pytorch.org/whl/cpu

sentence-transformers>=3.3.1,<4.0.0  # Latest stable (2025 - Epic 41)
transformers>=4.46.1,<5.0.0  # Latest stable (2025 - Epic 41)
# Note: torch CPU-only version must be installed from PyTorch index (see --extra-index-url above)
# Using version range without +cpu label (pip will resolve from CPU index)
torch>=2.4.0,<3.0.0  # Stable PyTorch 2.4.x CPU-only (November 2025)
torch-geometric>=2.5.0,<3.0.0  # Stable PyTorch Geometric for GNN (CPU-compatible, November 2025)
openvino>=2024.5.0,<2025.0.0  # Latest stable 2024.x (2025 - Epic 41)
optimum-intel>=1.21.0,<2.0.0  # Latest stable (2025 - Epic 41)
peft>=0.12.0,<1.0.0  # Stable LoRA fine-tuning support

# Scheduling
apscheduler>=3.10.0,<4.0.0  # Stable task scheduler

# Utilities
python-dotenv>=1.0.0,<2.0.0  # Stable environment variable loader
tenacity>=8.2.0,<9.0.0  # Stable retry library
pyyaml>=6.0.1,<7.0.0  # Stable YAML parser
synthetic-home>=4.1.0,<5.0.0  # Home Assistant synthetic home generator library
deprecated>=1.2.13,<2.0.0  # Stable deprecation warnings
rapidfuzz>=3.10.0,<4.0.0  # Stable fuzzy string matching
python-slugify>=8.0.0,<9.0.0  # Stable URL slug generation (2025)
langchain>=0.3.0,<1.0.0  # Stable LangChain (November 2025)
langchain-openai>=0.2.0,<1.0.0  # Stable LangChain OpenAI integration
jinja2>=3.1.4,<4.0.0  # Stable template engine (2025 compatible)

# Testing
pytest>=8.3.0,<9.0.0  # Stable pytest (November 2025)
pytest-asyncio>=0.24.0,<1.0.0  # Stable async pytest support
