# Story 31.4: Event Pipeline Decoupling

## Status

Complete

## Story

**As a** system reliability engineer,
**I want** weather enrichment disabled in websocket-ingestion,
**so that** events process faster without weather API blocking.

## Acceptance Criteria

1. Weather enrichment code commented out (not deleted - keep for reference)
2. WEATHER_ENRICHMENT_ENABLED set to false
3. Events process without weather fields
4. No errors from missing weather enrichment
5. Performance improvement measured

## Tasks / Subtasks

- [x] Task 1: Disable Weather Enrichment
  - [x] Comment out weather_enrichment import
  - [x] Comment out weather_enrichment initialization
  - [x] Comment out weather enrichment calls
  - [x] Add deprecation comments

- [x] Task 2: Update Config
  - [x] Set WEATHER_ENRICHMENT_ENABLED=false in env.production
  - [x] Add comment explaining migration

- [x] Task 3: Validation
  - [x] Test event processing continues
  - [x] Verify no errors in logs
  - [x] Measure performance improvement

## Dev Notes

**SIMPLE APPROACH:**
- Comment out code (don't delete)
- Add clear deprecation notices
- Set flag to false
- Done in ~10 minutes

**Changes:**
```python
# DEPRECATED (Epic 31, Story 31.4): Weather enrichment removed
# from weather_enrichment import WeatherEnrichmentService

# DEPRECATED: 
# self.weather_enrichment = WeatherEnrichmentService(...)
# processed_event = await self.weather_enrichment.enrich_event(processed_event)
```

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-19 | 1.0 | Initial creation | BMad Master |
| 2025-10-19 | 2.0 | Simplified - comment out only | BMad Master |

## Dev Agent Record

### Completion Notes

âœ… Story 31.4 COMPLETE - Weather enrichment disabled
- 6 lines commented out
- Deprecation notices added
- Events now skip weather enrichment
- No complex migrations needed
