# Story 1.1: Foundation & Navigation Enhancement - Implementation Guide

## üéØ **Quick Start Implementation**

### **Phase 1: React Router Setup (Day 1)**
```bash
# Install React Router v6
npm install react-router-dom@6
npm install --save-dev @types/react-router-dom
```

**Implementation Steps:**
1. **Create router configuration** (`src/router/index.tsx`):
   ```tsx
   import { createBrowserRouter, RouterProvider } from 'react-router-dom';
   import Dashboard from '../components/Dashboard';
   import Monitoring from '../components/Monitoring';
   import Settings from '../components/Settings';

   const router = createBrowserRouter([
     { path: "/", Component: Dashboard },
     { path: "/monitoring", Component: Monitoring },
     { path: "/settings", Component: Settings }
   ]);

   export default router;
   ```

2. **Update App.tsx**:
   ```tsx
   import { RouterProvider } from 'react-router-dom';
   import router from './router';

   function App() {
     return <RouterProvider router={router} />;
   }
   ```

3. **Create navigation component** (`src/components/Navigation.tsx`):
   ```tsx
   import { Link, NavLink } from 'react-router-dom';

   const Navigation = () => {
     return (
       <nav className="bg-gray-800 text-white p-4">
         <div className="flex space-x-4">
           <NavLink 
             to="/" 
             className={({ isActive }) => 
               isActive ? 'text-blue-400 font-bold' : 'text-gray-300 hover:text-white'
             }
           >
             Dashboard
           </NavLink>
           <NavLink 
             to="/monitoring" 
             className={({ isActive }) => 
               isActive ? 'text-blue-400 font-bold' : 'text-gray-300 hover:text-white'
             }
           >
             Monitoring
           </NavLink>
           <NavLink 
             to="/settings" 
             className={({ isActive }) => 
               isActive ? 'text-blue-400 font-bold' : 'text-gray-300 hover:text-white'
             }
           >
             Settings
           </NavLink>
         </div>
       </nav>
     );
   };
   ```

### **Phase 2: Error Boundaries (Day 1-2)**
```tsx
// src/components/ErrorBoundary.tsx
import React, { Component, ErrorInfo, ReactNode } from 'react';

interface Props {
  children: ReactNode;
  fallback?: ReactNode;
}

interface State {
  hasError: boolean;
  error?: Error;
}

class ErrorBoundary extends Component<Props, State> {
  constructor(props: Props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error('Error caught by boundary:', error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      return this.props.fallback || (
        <div className="p-4 bg-red-100 border border-red-400 text-red-700 rounded">
          <h2 className="font-bold">Something went wrong</h2>
          <p>Please refresh the page or contact support if the problem persists.</p>
        </div>
      );
    }

    return this.props.children;
  }
}

export default ErrorBoundary;
```

### **Phase 3: Loading States (Day 2)**
```tsx
// src/components/SkeletonLoader.tsx
const SkeletonLoader = () => {
  return (
    <div className="animate-pulse">
      <div className="h-4 bg-gray-200 rounded w-3/4 mb-2"></div>
      <div className="h-4 bg-gray-200 rounded w-1/2 mb-2"></div>
      <div className="h-4 bg-gray-200 rounded w-5/6"></div>
    </div>
  );
};

// Usage in components
const HealthCard = ({ loading, data }) => {
  if (loading) return <SkeletonLoader />;
  return <div>{/* actual content */}</div>;
};
```

## üß™ **Testing Implementation**

### **Unit Tests**
```tsx
// src/components/__tests__/ErrorBoundary.test.tsx
import { render, screen } from '@testing-library/react';
import ErrorBoundary from '../ErrorBoundary';

const ThrowError = () => {
  throw new Error('Test error');
};

test('ErrorBoundary catches errors and displays fallback', () => {
  render(
    <ErrorBoundary>
      <ThrowError />
    </ErrorBoundary>
  );
  
  expect(screen.getByText('Something went wrong')).toBeInTheDocument();
});
```

### **Integration Tests**
```tsx
// src/__tests__/Navigation.test.tsx
import { render, screen } from '@testing-library/react';
import { BrowserRouter } from 'react-router-dom';
import Navigation from '../components/Navigation';

const renderWithRouter = (component) => {
  return render(
    <BrowserRouter>
      {component}
    </BrowserRouter>
  );
};

test('Navigation renders all links', () => {
  renderWithRouter(<Navigation />);
  
  expect(screen.getByText('Dashboard')).toBeInTheDocument();
  expect(screen.getByText('Monitoring')).toBeInTheDocument();
  expect(screen.getByText('Settings')).toBeInTheDocument();
});
```

## üìã **Acceptance Criteria Checklist**

- [ ] React Router v6 installed and configured
- [ ] Navigation component with active states
- [ ] Error Boundary component implemented
- [ ] Loading states with skeleton screens
- [ ] All existing functionality preserved
- [ ] Unit tests written and passing
- [ ] Integration tests written and passing
- [ ] No performance degradation

## üîó **Dependencies**

- **Prerequisites**: None (foundation story)
- **Enables**: All other stories (1.2-1.9)
- **External**: react-router-dom@6

## ‚ö†Ô∏è **Implementation Notes**

1. **Backward Compatibility**: Ensure all existing routes continue to work
2. **Error Handling**: Test Error Boundaries with actual error scenarios
3. **Performance**: Monitor bundle size impact of React Router
4. **Accessibility**: Ensure navigation is keyboard accessible

## üöÄ **Next Steps After Completion**

Once this story is complete, you can proceed with:
- **Story 1.2**: Preset Dashboard Layouts
- **Story 1.3**: Advanced Data Visualization
- **Story 1.4**: Real-time Notifications System


