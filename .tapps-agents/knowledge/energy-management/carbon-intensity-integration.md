# Carbon Intensity Integration

**Last Updated**: December 2025  
**Status**: Current best practices for 2025 carbon-aware energy management

## Overview

Carbon intensity integration enables carbon-aware energy management by incorporating real-time grid carbon intensity data into energy optimization decisions. This allows users to reduce their carbon footprint by timing energy consumption when the grid is cleaner.

## Core Concepts

### 1. Grid Carbon Intensity

**Definition**: The amount of carbon dioxide (CO₂) emissions per unit of electricity generated by the grid.

**Measurement**: Typically expressed in grams of CO₂ per kilowatt-hour (gCO₂/kWh).

**Why it matters**: Grid carbon intensity varies throughout the day based on the energy mix. Shifting consumption to times when the grid is cleaner (more renewables, less fossil fuels) reduces carbon footprint.

**Typical Range (2025)**:
- **Low carbon intensity**: 50-200 gCO₂/kWh (high renewable penetration)
- **Medium carbon intensity**: 200-400 gCO₂/kWh (balanced mix)
- **High carbon intensity**: 400-800+ gCO₂/kWh (fossil fuel heavy)

**Factors Affecting Intensity**:
- **Renewable generation**: Solar and wind availability (weather-dependent)
- **Demand patterns**: Peak demand often requires fossil fuel peaker plants
- **Grid mix**: Varies by region, time of day, season
- **Storage availability**: Battery storage can shift clean energy to high-demand periods

### 2. Carbon-Aware Optimization

**Principle**: Time energy consumption to minimize carbon emissions from grid electricity.

**Why it matters**: Reduces environmental impact without requiring on-site renewable generation. Enables carbon footprint reduction through intelligent scheduling.

**Best Practices (2025)**:
- **Low-carbon timing**: Schedule high-consumption tasks during low-carbon periods
- **High-carbon avoidance**: Reduce or delay consumption during high-carbon periods
- **Predictive scheduling**: Use carbon intensity forecasts for proactive optimization
- **Battery integration**: Charge batteries during low-carbon periods, use during high-carbon periods
- **EV charging optimization**: Charge vehicles when grid is cleanest

**Optimization Strategies**:
- **Carbon minimization**: Minimize total carbon emissions (absolute reduction)
- **Carbon intensity minimization**: Minimize average carbon intensity of consumption
- **Peak carbon avoidance**: Avoid consumption during highest carbon intensity periods
- **Renewable alignment**: Align consumption with renewable generation peaks (solar noon, windy periods)

### 3. Data Sources and Integration

**Data Sources (2025)**:
- **Electricity Maps API**: Real-time and forecasted carbon intensity by region
- **WattTime API**: Real-time grid emissions data
- **Carbon Intensity API (UK)**: UK-specific carbon intensity data
- **Utility APIs**: Some utilities provide carbon intensity data
- **Local forecasts**: Weather-based predictions for renewable generation

**Integration Methods**:
- **API integration**: Fetch carbon intensity data from external APIs
- **Real-time updates**: Update carbon intensity data every 5-15 minutes
- **Forecasting**: Use predicted carbon intensity for scheduling optimization
- **Regional accuracy**: Ensure data is specific to user's grid region

**Data Storage**:
- Store carbon intensity data in time-series database (InfluxDB)
- Track intensity alongside energy consumption data
- Maintain historical data for analysis and pattern recognition
- Calculate carbon footprint: energy consumption × carbon intensity

### 4. Carbon Footprint Calculation

**Principle**: Calculate total carbon emissions from electricity consumption.

**Formula**: 
```
Carbon Footprint (kg CO₂) = Energy Consumption (kWh) × Carbon Intensity (gCO₂/kWh) / 1000
```

**Calculation Methods**:
- **Real-time calculation**: Calculate footprint using actual consumption and intensity
- **Hourly aggregation**: Sum hourly consumption × hourly intensity
- **Daily totals**: Calculate daily carbon footprint for reporting
- **Device-level**: Calculate carbon footprint per device for granular insights

**Best Practices (2025)**:
- Use actual grid carbon intensity (not average or generic values)
- Update calculations with real-time intensity data
- Account for regional variations (intensity varies by grid region)
- Include both consumption and generation (if user has solar/battery)

### 5. User Interface and Feedback

**Principle**: Provide clear visibility into carbon intensity and carbon footprint.

**Why it matters**: Users need to understand their carbon impact to make informed decisions. Visual feedback encourages carbon-aware behaviors.

**Best Practices (2025)**:
- **Real-time display**: Show current grid carbon intensity
- **Forecast visualization**: Display predicted carbon intensity over next 24 hours
- **Carbon footprint tracking**: Show daily, weekly, monthly carbon emissions
- **Optimization suggestions**: Recommend optimal times for high-consumption tasks
- **Impact visualization**: Show carbon savings from optimization actions

**Dashboard Elements**:
- Current carbon intensity (gCO₂/kWh) with trend indicator
- Carbon intensity forecast (next 24 hours)
- Current carbon footprint (today's emissions)
- Historical carbon footprint (daily, weekly, monthly trends)
- Carbon savings from optimizations
- Optimal timing recommendations

**Feedback Mechanisms**:
- Carbon intensity alerts (high/low intensity periods)
- Carbon footprint summaries (daily/weekly reports)
- Savings notifications (carbon saved through optimizations)
- Comparison metrics (vs average, vs previous period)

## Implementation Strategies

### Automated Carbon-Aware Scheduling

**High-Consumption Device Scheduling**:
- EV charging: Charge during lowest carbon intensity periods
- Water heater: Heat water during low-carbon periods
- HVAC pre-conditioning: Pre-cool/pre-heat during low-carbon periods
- Pool/spa equipment: Run during low-carbon periods

**Load Shifting**:
- Shift discretionary consumption to low-carbon periods
- Reduce consumption during high-carbon periods (peak demand)
- Use battery storage to shift clean energy consumption
- Coordinate with demand response programs

### Carbon-Aware Automation

**Trigger Conditions**:
- Carbon intensity threshold (e.g., < 200 gCO₂/kWh for low-carbon mode)
- Carbon intensity forecast (schedule based on predicted intensity)
- Carbon footprint targets (automate to meet daily/weekly targets)

**Automation Actions**:
- Enable/disable high-consumption devices based on carbon intensity
- Adjust device schedules to align with low-carbon periods
- Notify users of optimal timing for energy-intensive tasks
- Adjust HVAC setpoints to reduce consumption during high-carbon periods

## Integration with HomeIQ

### Carbon Intensity Service

**Service Implementation**:
- `carbon-intensity` service (Port 8010) fetches carbon intensity data
- Stores data in InfluxDB for historical tracking
- Provides API endpoint for real-time intensity queries
- Integrates with energy management optimizations

**Data Flow**:
```
Carbon Intensity API
        ↓
carbon-intensity service (Port 8010)
        ↓
InfluxDB (carbon_intensity measurement)
        ↓
data-api (Port 8006) - queries
        ↓
health-dashboard (Port 3000) - display
```

### Energy Management Integration

**Optimization Integration**:
- Use carbon intensity data in power optimization strategies
- Carbon-aware load shifting (prefer low-carbon periods)
- Carbon-aware device scheduling
- Carbon footprint tracking alongside energy consumption

**API Integration**:
- Query carbon intensity via data-api service
- Combine with energy consumption data for footprint calculation
- Use in automation triggers and conditions
- Display in dashboards and reports

## Related Domains

- **Energy Consumption Tracking**: Foundation for carbon footprint calculation
- **Power Optimization Strategies**: Carbon-aware optimization approaches
- **Energy Economics**: Cost vs carbon trade-offs in optimization
- **Pattern Analytics**: Carbon footprint pattern analysis

## Best Practices Summary

1. ✅ Integrate real-time carbon intensity data from reliable sources
2. ✅ Calculate carbon footprint using actual consumption and intensity
3. ✅ Implement carbon-aware scheduling and optimization
4. ✅ Provide clear visibility into carbon intensity and footprint
5. ✅ Use forecasts for proactive carbon-aware optimization
6. ✅ Balance carbon reduction with user comfort and cost
7. ✅ Track and report carbon savings from optimizations

## Technology Standards (2025)

- **Carbon Intensity APIs**: Electricity Maps, WattTime, regional APIs
- **Update Frequency**: 5-15 minute intervals for real-time data
- **Forecasting**: 24-48 hour forecasts for scheduling optimization
- **Data Storage**: Time-series database (InfluxDB) for historical tracking
- **Integration**: REST APIs, WebSocket for real-time updates

## Regional Considerations

**Grid Variations**:
- **Clean grids**: Regions with high renewable penetration (low baseline intensity)
- **Fossil-heavy grids**: Regions dependent on coal/gas (higher baseline intensity)
- **Mixed grids**: Varying intensity based on time of day, season, weather

**Data Availability**:
- **High availability**: Regions with public carbon intensity APIs (UK, parts of EU, US)
- **Limited availability**: Regions without public APIs (use estimates or utility data)
- **Accuracy**: Real-time data more accurate than estimates or averages

## Future Considerations

**Trends (2025)**:
- Increasing renewable penetration reducing average grid intensity
- Better forecasting accuracy for renewable generation
- More granular carbon intensity data (sub-regional)
- Standardization of carbon intensity APIs and data formats

**Emerging Technologies**:
- AI-based carbon intensity prediction
- Real-time grid balancing with carbon awareness
- Distributed carbon tracking (blockchain-based verification)
- Carbon offset integration with energy management

