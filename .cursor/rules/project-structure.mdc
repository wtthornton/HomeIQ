---
alwaysApply: true
description: Project structure and file organization guidelines
---

# HomeIQ Project Structure Guide

This project uses **TappsCodingAgents** for AI-assisted development with structured documentation and quality enforcement.

## Core Structure

- **`.cursor/rules/`** - Cursor IDE rules for AI agent guidance
- **`.tapps-agents/`** - TappsCodingAgents configuration and cache
- **`docs/`** - Project documentation (architecture, PRD, stories)
- **`services/`** - Microservices (30+ services)
- **`implementation/`** - Implementation notes and status reports

## Key Directories

### Services (`services/`)
Each microservice follows this structure:
```
services/{service-name}/
├── src/
│   └── main.py          # Service entry point
├── tests/               # Service tests
├── Dockerfile           # Container definition
├── requirements.txt     # Python dependencies
└── README.md            # Service documentation
```

### Documentation (`docs/`)
- **`docs/README.md`** - **Documentation index** – lists existing paths; use for correct references.
- **`docs/architecture/`** - System architecture documentation
- **`docs/deployment/`** - Deployment runbook, pipeline, nginx (use instead of `docs/DEPLOYMENT_GUIDE.md`)
- **`docs/planning/`** - Phase reports, rebuild guides, upgrade plans (epic/planning docs)
- **`docs/workflows/`** - Workflow documentation (Simple Mode outputs)
- **`docs/prd/`** - Optional; if absent, use `docs/planning/` or root **`stories/`** for epics.

### TappsCodingAgents Config (`.tapps-agents/`)
- **`config.yaml`** - Framework configuration
- **`project-profile.yaml`** - Auto-detected project profile
- **`kb/`** - Knowledge base cache (Context7)

## File Organization Rules - MANDATORY

### Directory Purpose and Usage

#### `docs/current/` - Active Reference Documentation (AGENT PRIORITY)
- **Purpose**: Current, active documentation that agents and developers should reference
- **Agent Rule**: Focus primarily on this directory for documentation lookups
- **Status**: All documentation here is current and maintained

#### `docs/archive/` - Historical Reference (AGENTS IGNORE)
- **Purpose**: Completed, superseded, or historical documentation
- **Agent Rule**: IGNORE this directory unless explicitly researching history
- **Status**: Archived by quarter (2024/, 2025-q1/, 2025-q2/, 2025-q3/, 2025-q4/)

#### `docs/` - Reference Documentation ONLY
- **Purpose**: Permanent, reusable documentation for the project
- **Allowed**:
  - Architecture documentation (`docs/architecture/`)
  - PRD and epics (`docs/prd/`)
  - User stories (`docs/stories/`)
  - Workflow outputs (`docs/workflows/`)
  - Reference guides (API_DOCUMENTATION.md, TROUBLESHOOTING_GUIDE.md)
  - User manuals (USER_MANUAL.md, QUICK_START.md)
- **FORBIDDEN**:
  - Status reports (DEPLOYMENT_COMPLETE.md, *_STATUS.md)
  - Session summaries (*_SUMMARY.md for implementation work)
  - Fix reports (*_FIX_*.md, *_FIXES_SUMMARY.md)
  - Completion reports (*_COMPLETE.md, EPIC_*_COMPLETE.md)

#### `implementation/` - Implementation Notes and Status
- **Purpose**: Session notes, status reports, and implementation artifacts
- **Allowed**:
  - Status reports (DEPLOYMENT_COMPLETE.md, *_STATUS.md)
  - Completion reports (EPIC_*_COMPLETE.md, *_COMPLETE.md)
  - Session summaries (SESSION_*.md, *_SUMMARY.md)
  - Implementation plans (*_PLAN.md, *_IMPLEMENTATION_*.md)
  - Fix reports (*_FIX_*.md, *_FIXES_SUMMARY.md)
  - Analysis reports (*_ANALYSIS.md) → `implementation/analysis/`
  - Verification results (*_VERIFICATION_RESULTS.md) → `implementation/verification/`
- **Subdirectories**:
  - `implementation/analysis/` - Technical analysis and diagnosis
  - `implementation/verification/` - Test and verification results
  - `implementation/archive/` - Old/superseded implementation notes

#### Root Directory - Configuration Files ONLY
- **Purpose**: Project configuration and entry points
- **Allowed ONLY**:
  - README.md (project overview)
  - package.json, package-lock.json
  - docker-compose*.yml
  - .env*, .gitignore, .dockerignore
  - License, configuration files
- **FORBIDDEN**:
  - ANY .md files except README.md
  - Status reports, summaries, analysis, or implementation notes

### File Creation Rules - MANDATORY FOR ALL AGENTS

When creating ANY of these file types, you MUST place them in the correct location:

1. **Status/Completion Reports** → `implementation/`
   - Pattern: *_COMPLETE.md, *_STATUS.md, EPIC_*_COMPLETE.md

2. **Session Summaries** → `implementation/`
   - Pattern: SESSION_*.md, *_SUMMARY.md (implementation-related)

3. **Fix/Enhancement Reports** → `implementation/`
   - Pattern: *_FIX_*.md, *_FIXES_SUMMARY.md

4. **Analysis/Diagnosis** → `implementation/analysis/`
   - Pattern: *_ANALYSIS.md, *_DIAGNOSIS.md, *_CALL_TREE.md

5. **Verification Results** → `implementation/verification/`
   - Pattern: *_VERIFICATION_RESULTS.md, *_VERIFICATION.md

6. **Implementation Plans** → `implementation/`
   - Pattern: *_PLAN.md, *_IMPLEMENTATION_*.md

7. **Reference Documentation** → `docs/`
   - Pattern: Guides, manuals, API docs

### CRITICAL RULE: Never Create Files at Root

**BEFORE creating ANY .md file (except README.md):**
1. Determine file type from patterns above
2. Create in appropriate directory
3. Use proper subdirectories (analysis/, verification/)
4. NEVER default to root directory

### Example Decision Tree

```
Creating a new .md file?
├─ Is it README.md? → Root (ONLY exception)
├─ Is it a status/completion report? → implementation/
├─ Is it a session summary? → implementation/
├─ Is it a fix/enhancement report? → implementation/
├─ Is it analysis/diagnosis? → implementation/analysis/
├─ Is it verification results? → implementation/verification/
├─ Is it an implementation plan? → implementation/
├─ Is it a reference guide/manual? → docs/
└─ When in doubt → Ask user or default to implementation/

Archiving completed work?
├─ Completed in 2024? → docs/archive/2024/
├─ Completed Q1 2025 (Jan-Mar)? → docs/archive/2025-q1/
├─ Completed Q2 2025 (Apr-Jun)? → docs/archive/2025-q2/
├─ Completed Q3 2025 (Jul-Sep)? → docs/archive/2025-q3/
├─ Completed Q4 2025 (Oct-Dec)? → docs/archive/2025-q4/
└─ Superseded documentation? → docs/archive/{quarter}/
```

## TappsCodingAgents Integration

### Simple Mode Workflow Outputs
When using `@simple-mode *build`, outputs go to:
- `docs/workflows/simple-mode/step1-enhanced-prompt.md`
- `docs/workflows/simple-mode/step2-user-stories.md`
- `docs/workflows/simple-mode/step3-architecture.md`
- `docs/workflows/simple-mode/step4-design.md`
- `docs/workflows/simple-mode/step6-review.md`
- `docs/workflows/simple-mode/step7-testing.md`

### Quality Reports
- `reports/quality/` - Generated quality reports

## Enforcement

- All AI agents MUST follow these rules
- Any .md file created at root (except README.md) is a violation
- Code review should check for misplaced files
- Periodic cleanup to move misplaced files to correct locations
