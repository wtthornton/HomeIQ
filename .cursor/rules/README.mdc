---
alwaysApply: true
description: Overview of all available Cursor rules
---

# Cursor Rules Overview

This project includes comprehensive Cursor rules to enhance development workflow and code quality.

## Available Rules

### BMAD Agent Rules (`.cursor/rules/bmad/`)
- **bmad-master.mdc** - Universal task executor and BMAD method expert (NEW: workflow-init, customizations)
- **architect.mdc** - System architecture and design specialist
- **dev.mdc** - Full-stack development and implementation
- **pm.mdc** - Product management and PRD creation
- **qa.mdc** - Quality assurance and testing specialist
- **po.mdc** - Product ownership and story management
- **sm.mdc** - Scrum master and process management
- **ux-expert.mdc** - User experience design specialist
- **analyst.mdc** - Business analysis and research
- **bmad-orchestrator.mdc** - Workflow orchestration and coordination

### Project Rules
- **project-structure.mdc** - Project structure and file organization guidelines
- **code-quality.mdc** - Code quality standards and best practices
- **bmad-workflow.mdc** - BMAD workflow integration and process guidelines (UPDATED: Phase 1 features)
- **development-environment.mdc** - Development environment setup and configuration (UPDATED: PowerShell warnings)
- **powershell-commands.mdc** - PowerShell command guidelines - CRITICAL rules for Windows (NEW)
- **documentation-standards.mdc** - Documentation standards and formatting guidelines
- **security-best-practices.mdc** - Security best practices and guidelines
- **epic-31-architecture.mdc** - Current architecture patterns (Epic 31 - enrichment-pipeline deprecated)

## How to Use

### Activating BMAD Agents

**In Cursor IDE, use one of these methods:**

1. **Type and Select (Recommended):**
   - Type `@agent-name` (e.g., `@bmad-master`)
   - When autocomplete appears, press **Enter** or **Tab** to select the first option
   - Or click on the desired file from the dropdown list

2. **Use Agent Dropdown:**
   - Click the **"Agent"** dropdown (infinity icon) in the chat interface
   - Select the agent from the list

3. **Type and Send Immediately:**
   - Type `@agent-name` and immediately press **Enter** to send
   - This bypasses autocomplete selection

**Available Agents:**
```
@bmad-master    # Universal task executor
@architect      # System architecture and design
@dev           # Full-stack development
@pm            # Product management
@qa            # Quality assurance
@po            # Product ownership
@sm            # Scrum master
@ux-expert     # User experience design
@analyst       # Business analysis
```

**Note:** If autocomplete clears your input, press **Escape** first, then type `@agent-name` and press **Enter**.

### BMad Master Commands (NEW - Phase 1)
- `*workflow-init` - Analyze project and recommend workflow track (Quick Flow / BMad Method / Enterprise)
- All existing commands plus new workflow initialization

### QA Agent Commands
- `*gate {story}` - Execute quality gate decision
- `*nfr-assess {story}` - Validate non-functional requirements
- `*review {story}` - Comprehensive story review
- `*review-task {story} {task_number}` - Progressive task-level code review
- `*risk-profile {story}` - Generate risk assessment matrix
- `*test-design {story}` - Create test scenarios
- `*trace {story}` - Map requirements to tests

### Phase 1 Features (NEW)
- **Scale-Adaptive Intelligence**: `*workflow-init` command for automatic workflow selection
- **Agent Customization**: Customize agents via `.bmad-core/customizations/{agent-id}-custom.yaml` (gitignored, update-safe)
- **Enhanced Sharding**: 90% token savings with cross-references and intelligent section loading
- **Quick Fix Workflow**: Streamlined workflow for bug fixes and small features
- **Visual Diagrams**: SVG workflow diagram support
- **Context7 KB Integration**: All agents support KB-first documentation lookup with intelligent caching
- **Progressive Code Review**: Task-level reviews during development (QA agent)
- **Auto-Refresh Queue**: Background processing of stale KB cache entries

See [bmad-workflow.mdc](mdc:.cursor/rules/bmad-workflow.mdc) for details.

### Context7 KB Integration Commands (All Agents)
**Available across all BMAD agents** - Each agent has Context7 KB integration for domain-specific documentation:
- `*context7-resolve {library}` - Resolve library name to Context7-compatible library ID
- `*context7-docs {library} {topic}` - Get KB-first documentation (checks cache, then Context7 API)
- `*context7-kb-refresh` - Check and refresh stale cache entries
- `*context7-kb-process-queue` - Process queued background refreshes

**BMad Master additional commands:**
- `*context7-help` - Show Context7 usage examples and best practices
- `*context7-kb-status` - Show knowledge base statistics and hit rates
- `*context7-kb-search {query}` - Search local knowledge base
- `*context7-kb-cleanup` - Clean up old/unused cached documentation
- `*context7-kb-rebuild` - Rebuild knowledge base index
- `*context7-kb-analytics` - Show detailed KB usage analytics
- `*context7-kb-test` - Test KB integration and cache functionality

**Agent-Specific Usage:**
- **@dev** - Library implementation patterns and testing frameworks
- **@architect** - Technology selection and architecture patterns
- **@qa** - Testing libraries and quality tools
- **@pm** - Technology feasibility research
- **@analyst** - Competitive technology analysis
- **@ux-expert** - UI libraries and design systems
- **@po** - Technical validation and complexity assessment
- **@sm** - Technical story preparation

### File References
When referencing files in rules, use the format:
- `[filename](mdc:path/to/file)` for relative paths
- Always reference from workspace root

## Rule Types

### Always Apply Rules
Rules with `alwaysApply: true` are automatically applied to every request:
- **project-structure.mdc** - Project structure guidance
- **epic-31-architecture.mdc** - Current architecture (Epic 31 - critical for accuracy)
- **README.mdc** - This overview

### File-Specific Rules
Rules with `globs` apply only to matching file types:
- **code-quality.mdc** - Applies to code files (*.py, *.js, *.ts, etc.)
- **development-environment.mdc** - Applies to config files
- **documentation-standards.mdc** - Applies to documentation files
- **security-best-practices.mdc** - Applies to code and config files

### Manual Rules
Rules with `description` can be manually invoked:
- **bmad-workflow.mdc** - BMAD workflow integration

## Context Management

**Important:** Manage context window for optimal performance. See **[Context Management Guide](../context-management-guide.md)** for:
- How to start new chats efficiently
- Using `.cursorignore` to exclude large files
- Leveraging BMAD sharding for 90% token savings
- Best practices for focused queries
- Epic isolation strategies

**Quick Tips:**
- Start new chat per epic (`Cmd/Ctrl + L`)
- Close files when done editing
- Use file references (`@filename`) instead of broad queries
- Check `.cursorignore` excludes simulation data and archives

## Best Practices

1. **Use Appropriate Agents**: Choose the right BMAD agent for your task
2. **Follow Standards**: Adhere to code quality and documentation standards
3. **Security First**: Always consider security implications
4. **Document Everything**: Keep documentation up-to-date
5. **Test Thoroughly**: Write tests for all new functionality
6. **Run Unit Tests**: Use `python scripts/simple-unit-tests.py` before committing changes
7. **Leverage Context7 KB**: All agents automatically use KB-first approach - check cache before API calls
8. **Know the Architecture**: Understand Epic 31 changes (enrichment-pipeline deprecated, direct InfluxDB writes)
9. **Customize Agents**: Create customizations in `.bmad-core/customizations/` for team-specific preferences
10. **Progressive Reviews**: Use `*review-task` during development for early feedback (QA agent)
11. **Manage Context**: Start new chats frequently, use focused queries, close unused files (see Context Management Guide)

## Getting Help

- Use `*help` command with any BMAD agent
- Refer to [.bmad-core/user-guide.md](mdc:.bmad-core/user-guide.md) for detailed BMAD methodology
- Check [.bmad-core/core-config.yaml](mdc:.bmad-core/core-config.yaml) for project configuration