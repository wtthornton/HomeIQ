---
description: HomeIQ project context and development guidelines
alwaysApply: false
---

# HomeIQ Project Context

## Project Overview

**HomeIQ** is a home automation intelligence platform with 30+ microservices that:
- Ingests Home Assistant events via WebSocket
- Stores time-series data in InfluxDB
- Provides AI-powered automation suggestions
- Displays health metrics on a dashboard

## Architecture (Epic 31 - Current)

**Event Flow:**
```
Home Assistant WebSocket → websocket-ingestion → InfluxDB → data-api → health-dashboard
```

**Key Services:**
- `websocket-ingestion` (8001) - Event ingestion with inline normalization
- `data-api` (8006) - Query endpoint for events
- `health-dashboard` (3000) - React dashboard
- `ai-automation-service` (8024) - AI automation suggestions

**Database:**
- **InfluxDB** - Time-series data (events, metrics)
- **SQLite** - Relational metadata (devices, entities)

## TappsCodingAgents Integration

This project uses **TappsCodingAgents** for AI-assisted development:

### Simple Mode (Primary Interface)
```
@simple-mode *build "Create new feature"
@simple-mode *review {file}
@simple-mode *fix {file} "Fix description"
@simple-mode *test {file}
```

### Configuration
- `.tapps-agents/config.yaml` - Framework configuration
- `.tapps-agents/project-profile.yaml` - Auto-detected project profile

### Quality Standards
- Overall score: ≥70 (≥80 for critical services)
- Security: ≥7.0/10
- Maintainability: ≥7.0/10
- Test coverage: ≥80% target

## Development Guidelines

### Use Simple Mode Workflows
```bash
# New feature
@simple-mode *build "Add device health monitoring"

# Bug fix
@simple-mode *fix services/data-api/src/main.py "Fix connection timeout"

# Code review
@simple-mode *review services/websocket-ingestion/src/main.py

# Generate tests
@simple-mode *test services/ai-automation-service/src/main.py
```

### Follow Epic 31 Architecture
- ✅ Direct InfluxDB writes (no enrichment-pipeline)
- ✅ Services write directly to InfluxDB
- ✅ Query via data-api
- ✅ Standalone services (no service-to-service HTTP dependencies)

### Quality Gates
Before committing code:
1. Run `@simple-mode *review {file}` or `python -m tapps_agents.cli reviewer score {file}`
2. Ensure score ≥70 (≥80 for critical services)
3. Generate tests: `@simple-mode *test {file}`

## File Organization

```
HomeIQ/
├── services/              # 30+ microservices
│   ├── websocket-ingestion/
│   ├── data-api/
│   ├── health-dashboard/
│   └── ...
├── docs/                  # Documentation
├── implementation/        # Implementation notes
├── .cursor/rules/         # Cursor rules
├── .tapps-agents/         # TappsCodingAgents config
└── docker-compose.yml     # Container orchestration
```

## References

- [Epic 31 Architecture](mdc:.cursor/rules/epic-31-architecture.mdc) - Current architecture patterns
- [Simple Mode Guide](mdc:.cursor/rules/simple-mode.mdc) - Workflow documentation
- [Quick Reference](mdc:.cursor/rules/quick-reference.mdc) - Command reference
