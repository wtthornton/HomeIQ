# Home Assistant Activity Ingestor - Environment Configuration
# Copy this file to .env and fill in your specific values

# Home Assistant MQTT Configuration
# Note: MQTT typically runs on the same network as Home Assistant
HA_MQTT_HOST=192.168.1.86
HA_MQTT_PORT=1883
HA_MQTT_USERNAME=your_mqtt_username
HA_MQTT_PASSWORD=your_mqtt_password
HA_MQTT_CLIENT_ID=ha-ingestor-dev

# Home Assistant WebSocket Configuration
# Your Home Assistant instance URL
HA_WS_URL=ws://192.168.1.86:8123/api/websocket
HA_WS_TOKEN=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiI2ZTc1NDJjODllMDc0NGE3YjI1MWRmMDM0MGE4MzM1ZSIsImlhdCI6MTc1NTU1MzY4NywiZXhwIjoyMDcwOTEzNjg3fQ.vB5StATqW6sUsSIlx0C6MaaOtw3dAarrue9KGFrKVoo

# InfluxDB Configuration
INFLUXDB_URL=http://influxdb:8086
INFLUXDB_TOKEN=your_influxdb_token
INFLUXDB_ORG=your_org
INFLUXDB_BUCKET=home_assistant_events

# Schema Optimization Configuration
INFLUXDB_SCHEMA_OPTIMIZATION_ENABLED=true
INFLUXDB_MAX_TAG_CARDINALITY=10000
INFLUXDB_TAG_COMPRESSION_THRESHOLD=1000
INFLUXDB_FIELD_COMPRESSION_THRESHOLD=256
INFLUXDB_MEASUREMENT_CONSOLIDATION=true
INFLUXDB_AUTO_SCHEMA_EVOLUTION=true
INFLUXDB_SCHEMA_ANALYSIS_INTERVAL=300.0

# Data Retention and Cleanup Configuration
RETENTION_ENABLED=true
RETENTION_CLEANUP_INTERVAL=3600
RETENTION_MAX_CLEANUP_DURATION=300
RETENTION_MAX_CONCURRENT_JOBS=3
RETENTION_BATCH_SIZE=1000
RETENTION_JOB_TIMEOUT=300
RETENTION_RETRY_DELAY=60
RETENTION_ENFORCE_IMMEDIATELY=false
RETENTION_DRY_RUN=false

# Service Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
METRICS_ENABLED=true
METRICS_PORT=8000
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PORT=8001

# MQTT Topic Configuration
# Default Home Assistant MQTT topics to subscribe to
MQTT_TOPICS=["homeassistant/+/+/+","homeassistant/+/+/+/+","homeassistant/+/+/+/+/+"]

# Advanced MQTT Features
MQTT_ENABLE_PATTERN_MATCHING=false
MQTT_MAX_PATTERNS=100
MQTT_PATTERN_CACHE_SIZE=1000
MQTT_ENABLE_DYNAMIC_SUBSCRIPTIONS=false
MQTT_SUBSCRIPTION_TIMEOUT=300
MQTT_ENABLE_TOPIC_OPTIMIZATION=false
MQTT_TOPIC_OPTIMIZATION_INTERVAL=60

# Advanced MQTT Wildcard and Pattern Features
MQTT_ENABLE_ADVANCED_WILDCARDS=false
MQTT_ENABLE_REGEX_PATTERNS=false
MQTT_ENABLE_TOPIC_ALIASES=false
MQTT_MAX_WILDCARD_DEPTH=5
MQTT_ENABLE_PATTERN_VALIDATION=true
MQTT_PATTERN_PRIORITY_LEVELS=10

MQTT_QOS=1

# WebSocket Event Configuration
# Home Assistant event types to capture
WS_EVENT_TYPES=["state_changed","event","service_registered","service_removed","component_loaded","user_updated","device_registry_updated","entity_registry_updated"]

# WebSocket Event Filtering Configuration
WS_ENABLE_EVENT_FILTERING=true
WS_DEFAULT_EVENT_TYPES=["state_changed","event","service_registered","service_removed","component_loaded","user_updated","device_registry_updated","entity_registry_updated"]
WS_EVENT_FILTER_RULES={}
WS_ENABLE_EVENT_PATTERNS=false
WS_EVENT_CACHE_SIZE=1000
WS_ENABLE_EVENT_STATISTICS=true

# Development Settings
DEBUG=false
TESTING=false
